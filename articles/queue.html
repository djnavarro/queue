<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="queue">
<title>queue • queue</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="queue">
<meta property="og:description" content="queue">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">queue</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/queue.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/djnavarro/queue/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>queue</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/djnavarro/queue/blob/HEAD/vignettes/queue.Rmd" class="external-link"><code>vignettes/queue.Rmd</code></a></small>
      <div class="d-none name"><code>queue.Rmd</code></div>
    </div>

    
    
<p>Sometimes you want to do “everything, everywhere, all at once”. When
that happens it’s awfully convenient if you have easy-to-use tools to
execute your R code in parallel across multiple R sessions. That’s the
goal of the queue package. It provides a clean interface implementing
multi-worker task queues in R that doesn’t ask the user to do very much
work.</p>
<div class="section level2">
<h2 id="another-parallel-computing-tool">Another parallel computing tool<a class="anchor" aria-label="anchor" href="#another-parallel-computing-tool"></a>
</h2>
<p>Anyone familiar with the R ecosystem knows that there are already
many good tools for this purpose. The queue package isn’t intended to be
a replacement for sophisticated distributed computing tools like <a href="https://www.futureverse.org/" class="external-link">futureverse</a> (not even close!).
Nor is it intended as a replacement for session management tools like <a href="https://callr.r-lib.org/" class="external-link">callr</a>, upon on which queue is built.
If you find yourself needing flexible, highly performant tools, I
recommend both of those options thoroughly.</p>
<p>The reason queue exists is that, well, sometimes it’s nice to have an
adorably simple alternative. Not everyone in the R community has the
time and expertise to learn how to use fancy, but most of us have a
laptop, and that laptop has a bunch of cores that we sometimes forget to
use. With that in mind, queue is a deliberately simple tool with a
minimum of features.</p>
<p>Also – and I’ll be honest, this is the real reason it exists – I
wanted an excuse to make sure I really understood callr and <a href="https://r6.r-lib.org/" class="external-link">R6</a> and this felt like as good a side
project as any.</p>
</div>
<div class="section level2">
<h2 id="basic-usage">Basic usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h2>
<p>The queue package adopts an encapsulated object-oriented programming
style, and uses R6 classes to manage task queues. The primary class in
the package is <code>Queue</code>. When a new task queue is created it
also initialises a new <code>WorkerPool</code>, a collection of R
sessions in which tasks will be executed. You can set the number of
workers during initialisation:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/djnavarro/queue" class="external-link">queue</a></span><span class="op">)</span></span>
<span><span class="va">queue</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Queue.html">Queue</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>workers <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<p>Tasks are then pushed to the queue by calling it’s <code>add()</code>
method. A task is a function and a list of arguments. In the example
below, <code>wait()</code> is a function that sleeps for a specified
length of time and then returns its input. We’ll queue up 10 jobs that
pause for different lengths of time:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wait</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span>  <span class="va">x</span></span>
<span><span class="op">}</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">queue</span><span class="op">$</span><span class="fu">add</span><span class="op">(</span><span class="va">wait</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">i</span><span class="op">/</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>We execute the tasks by calling the <code>run()</code> method:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="va">queue</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span>message <span class="op">=</span> <span class="st">"verbose"</span><span class="op">)</span></span>
<span><span class="co">#&gt; → Task done: task_1 (0.22s)</span></span>
<span><span class="co">#&gt; → Task done: task_2 (0.29s)</span></span>
<span><span class="co">#&gt; → Task done: task_3 (0.38s)</span></span>
<span><span class="co">#&gt; → Task done: task_4 (0.43s)</span></span>
<span><span class="co">#&gt; → Task done: task_5 (0.57s)</span></span>
<span><span class="co">#&gt; → Task done: task_6 (0.67s)</span></span>
<span><span class="co">#&gt; → Task done: task_7 (0.78s)</span></span>
<span><span class="co">#&gt; → Task done: task_8 (0.88s)</span></span>
<span><span class="co">#&gt; → Task done: task_9 (0.98s)</span></span>
<span><span class="co">#&gt; → Task done: task_10 (1.07s)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Queue complete: 10 tasks done (2.06s)</span></span></code></pre></div>
<p>The output is stored in a tibble that contains a fairly detailed
representation of everything that happened during the execution of the
queue, including time stamps, any messages printed to the R console
during the execution of each function, and so on:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 17</span></span></span>
<span><span class="co">#&gt;    task_id worker_id state result runtime fun   args         created            </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> <span style="color: #949494; font-style: italic;">&lt;drtn&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lis&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> task_1       <span style="text-decoration: underline;">6</span>660 done  &lt;dbl&gt;  0.2193… <span style="color: #949494;">&lt;fn&gt;</span>  &lt;named list&gt; 2022-12-21 <span style="color: #949494;">06:46:30</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> task_2       <span style="text-decoration: underline;">6</span>674 done  &lt;dbl&gt;  0.2880… <span style="color: #949494;">&lt;fn&gt;</span>  &lt;named list&gt; 2022-12-21 <span style="color: #949494;">06:46:30</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> task_3       <span style="text-decoration: underline;">6</span>684 done  &lt;dbl&gt;  0.3785… <span style="color: #949494;">&lt;fn&gt;</span>  &lt;named list&gt; 2022-12-21 <span style="color: #949494;">06:46:30</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> task_4       <span style="text-decoration: underline;">6</span>699 done  &lt;dbl&gt;  0.4295… <span style="color: #949494;">&lt;fn&gt;</span>  &lt;named list&gt; 2022-12-21 <span style="color: #949494;">06:46:30</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> task_5       <span style="text-decoration: underline;">6</span>660 done  &lt;dbl&gt;  0.5736… <span style="color: #949494;">&lt;fn&gt;</span>  &lt;named list&gt; 2022-12-21 <span style="color: #949494;">06:46:30</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> task_6       <span style="text-decoration: underline;">6</span>674 done  &lt;dbl&gt;  0.6660… <span style="color: #949494;">&lt;fn&gt;</span>  &lt;named list&gt; 2022-12-21 <span style="color: #949494;">06:46:30</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> task_7       <span style="text-decoration: underline;">6</span>684 done  &lt;dbl&gt;  0.7801… <span style="color: #949494;">&lt;fn&gt;</span>  &lt;named list&gt; 2022-12-21 <span style="color: #949494;">06:46:30</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> task_8       <span style="text-decoration: underline;">6</span>699 done  &lt;dbl&gt;  0.8800… <span style="color: #949494;">&lt;fn&gt;</span>  &lt;named list&gt; 2022-12-21 <span style="color: #949494;">06:46:30</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> task_9       <span style="text-decoration: underline;">6</span>660 done  &lt;dbl&gt;  0.9751… <span style="color: #949494;">&lt;fn&gt;</span>  &lt;named list&gt; 2022-12-21 <span style="color: #949494;">06:46:30</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> task_10      <span style="text-decoration: underline;">6</span>674 done  &lt;dbl&gt;  1.0684… <span style="color: #949494;">&lt;fn&gt;</span>  &lt;named list&gt; 2022-12-21 <span style="color: #949494;">06:46:30</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 9 more variables: queued &lt;dttm&gt;, assigned &lt;dttm&gt;, started &lt;dttm&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   finished &lt;dttm&gt;, code &lt;int&gt;, message &lt;chr&gt;, stdout &lt;list&gt;, stderr &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   error &lt;list&gt;</span></span></span></code></pre></div>
<p>The results of the function call are always stored in a list column
called <code>result</code> because in general there’s no guarantee that
an arbitrary collection of tasks will return results that are consistent
with each other, but in this case they are, so we can check the results
like this:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">out</span><span class="op">$</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0</span></span></code></pre></div>
<p>By default, all the worker sessions are shutdown when the queue
completes, so the user doesn’t have to take care of that, but you can
override this and reuse a single <code>WorkerPool</code> across more
than one <code>Queue</code> if you want. See the classs documentation
for details.</p>
</div>
<div class="section level2">
<h2 id="implementation-detail">Implementation detail<a class="anchor" aria-label="anchor" href="#implementation-detail"></a>
</h2>
<p>From the user point of view <code>Queue</code> objects are the most
useful part of the package, but internally most of the work is devolved
to other classes. Specifically, the package is built on top of two
abstractions: <code>Task</code> objects provide the storage class: they
hold a function, its arguments, its output, and a variety of other
metadata. The <code>Worker</code> class provides the representation of
an external R session and the ability to execute and manage a
<code>Task</code> using that session. Internally, the
<code>Worker</code> class relies on <a href="https://callr.r-lib.org/articles/r-session.html" class="external-link">callr::r_session</a>.</p>
<p>To allow a <code>Queue</code> to execute multiple jobs in parallel,
there are two additional classes provided by the queue package: a
<code>TaskList</code> object is a container that holds multiple
<code>Task</code> objects and has some methods for working with them,
and similarly a <code>WorkerPool</code> is a container for multiple
<code>Worker</code> objects with tools for working with those. A
<code>Queue</code> is associated with a <code>WorkerPool</code> and a
<code>TaskList</code>, and has methods that will return each of these,
should you ever have a need to play around with the internal data
structures.</p>
</div>
<div class="section level2">
<h2 id="crash-resistance">Crash resistance<a class="anchor" aria-label="anchor" href="#crash-resistance"></a>
</h2>
<p>The queue package isn’t very sophisticated in detecting sessions that
have crashed, but it does have some. For simplicity, let’s define a
function that is guaranteed to crash the R session as soon as it is
called:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crash</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/CallExternal.html" class="external-link">.Call</a></span><span class="op">(</span><span class="st">"abort"</span><span class="op">)</span></span></code></pre></div>
<p>Now let’s define a queue that has only two workers, but has no less
than three tasks that are guaranteed to crash the worker the moment the
tasks are started:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">queue</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Queue.html">Queue</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">queue</span><span class="op">$</span><span class="fu">add</span><span class="op">(</span><span class="va">wait</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">.1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">queue</span><span class="op">$</span><span class="fu">add</span><span class="op">(</span><span class="va">crash</span><span class="op">)</span></span>
<span><span class="va">queue</span><span class="op">$</span><span class="fu">add</span><span class="op">(</span><span class="va">crash</span><span class="op">)</span></span>
<span><span class="va">queue</span><span class="op">$</span><span class="fu">add</span><span class="op">(</span><span class="va">crash</span><span class="op">)</span></span>
<span><span class="va">queue</span><span class="op">$</span><span class="fu">add</span><span class="op">(</span><span class="va">wait</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">.1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The queue allocates task in a first-in first-out order, so the three
“crash tasks” are guaranteed to be allocated before the final “wait
task”. Let’s take a look at what happens when the queue runs:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">queue</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Queue complete: 5 tasks done (4.08s)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 17</span></span></span>
<span><span class="co">#&gt;   task_id worker_id state result runtime  fun   args         created            </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> <span style="color: #949494; font-style: italic;">&lt;drtn&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lis&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> task_1       <span style="text-decoration: underline;">6</span>730 done  &lt;dbl&gt;  0.16878… <span style="color: #949494;">&lt;fn&gt;</span>  &lt;named list&gt; 2022-12-21 <span style="color: #949494;">06:46:33</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> task_2       <span style="text-decoration: underline;">6</span>744 done  <span style="color: #949494;">&lt;NULL&gt;</span> 3.00899… <span style="color: #949494;">&lt;fn&gt;</span>  <span style="color: #949494;">&lt;list [0]&gt;</span>   2022-12-21 <span style="color: #949494;">06:46:33</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> task_3       <span style="text-decoration: underline;">6</span>730 done  <span style="color: #949494;">&lt;NULL&gt;</span> 3.17794… <span style="color: #949494;">&lt;fn&gt;</span>  <span style="color: #949494;">&lt;list [0]&gt;</span>   2022-12-21 <span style="color: #949494;">06:46:33</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> task_4       <span style="text-decoration: underline;">6</span>762 done  <span style="color: #949494;">&lt;NULL&gt;</span> 0.43273… <span style="color: #949494;">&lt;fn&gt;</span>  <span style="color: #949494;">&lt;list [0]&gt;</span>   2022-12-21 <span style="color: #949494;">06:46:33</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> task_5       <span style="text-decoration: underline;">6</span>776 done  &lt;dbl&gt;  0.40207… <span style="color: #949494;">&lt;fn&gt;</span>  &lt;named list&gt; 2022-12-21 <span style="color: #949494;">06:46:33</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 9 more variables: queued &lt;dttm&gt;, assigned &lt;dttm&gt;, started &lt;dttm&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   finished &lt;dttm&gt;, code &lt;dbl&gt;, message &lt;chr&gt;, stdout &lt;list&gt;, stderr &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   error &lt;list&gt;</span></span></span></code></pre></div>
<p>It’s a little slower than we’d hope, but it does finish both valid
tasks and returns nothing for the tasks that crashed their R sessions.
What has happened in the background is that the <code>Queue</code> runs
a simple scheduler that asks the <code>WorkerPool</code> to check if any
of the R sessions have crashed, and initialises new <code>Worker</code>
objects to replace them if that happens.</p>
<p>There is not even a <em>pretense</em> that any of this has been
optimised, but it does work.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Danielle Navarro.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
