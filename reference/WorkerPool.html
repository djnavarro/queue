<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="R6 class storing a pool of workers
R6 class storing a pool of workers"><title>R6 class storing a pool of workers — WorkerPool • queue</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="R6 class storing a pool of workers — WorkerPool"><meta property="og:description" content="R6 class storing a pool of workers
R6 class storing a pool of workers"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">queue</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/djnavarro/queue/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>R6 class storing a pool of workers</h1>
      <small class="dont-index">Source: <a href="https://github.com/djnavarro/queue/blob/HEAD/R/worker_pool.R" class="external-link"><code>R/worker_pool.R</code></a></small>
      <div class="d-none name"><code>WorkerPool.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>R6 class storing a pool of workers</p>
<p>R6 class storing a pool of workers</p>
    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A WorkerPool is a container that holds one or more workers and can request
them to assign tasks, start tasks, and complete tasks. It can also check to
see if any worker sessions have crashed and restart them as needed.
fields and methods that allow it to work on Tasks</p>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-WorkerPool-new"><code>WorkerPool$new()</code></a></p></li>
<li><p><a href="#method-WorkerPool-get_pool_worker"><code>WorkerPool$get_pool_worker()</code></a></p></li>
<li><p><a href="#method-WorkerPool-get_pool_state"><code>WorkerPool$get_pool_state()</code></a></p></li>
<li><p><a href="#method-WorkerPool-try_assign"><code>WorkerPool$try_assign()</code></a></p></li>
<li><p><a href="#method-WorkerPool-try_start"><code>WorkerPool$try_start()</code></a></p></li>
<li><p><a href="#method-WorkerPool-try_finish"><code>WorkerPool$try_finish()</code></a></p></li>
<li><p><a href="#method-WorkerPool-refill_pool"><code>WorkerPool$refill_pool()</code></a></p></li>
<li><p><a href="#method-WorkerPool-shutdown_pool"><code>WorkerPool$shutdown_pool()</code></a></p></li>
<li><p><a href="#method-WorkerPool-clone"><code>WorkerPool$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-WorkerPool-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a new worker pool</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/WorkerPool.html">WorkerPool</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>workers <span class="op">=</span> <span class="fl">4L</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>workers</code></dt>
<dd><p>The number of workers in the pool.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>A new <code>WorkerPool</code> object.</p>
</div>

</div><p></p><hr><a id="method-WorkerPool-get_pool_worker"></a><div class="section">
<h3 id="method-get-pool-worker-">Method <code>get_pool_worker()</code><a class="anchor" aria-label="anchor" href="#method-get-pool-worker-"></a></h3>
<p>Return a specific worker</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">WorkerPool</span><span class="op">$</span><span class="fu">get_pool_worker</span><span class="op">(</span><span class="va">ind</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>ind</code></dt>
<dd><p>The index of the worker in the pool</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>The corresponding <code>Worker</code> object.</p>
</div>

</div><p></p><hr><a id="method-WorkerPool-get_pool_state"></a><div class="section">
<h3 id="method-get-pool-state-">Method <code>get_pool_state()</code><a class="anchor" aria-label="anchor" href="#method-get-pool-state-"></a></h3>
<p>Return a simple summary of the worker pool</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">WorkerPool</span><span class="op">$</span><span class="fu">get_pool_state</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-2">Returns<a class="anchor" aria-label="anchor" href="#returns-2"></a></h4>
<p>A named character vector specifying the current state
of each worker ("starting", "idle", "busy", or "finished"). Names
denote worker ids</p>
</div>

</div><p></p><hr><a id="method-WorkerPool-try_assign"></a><div class="section">
<h3 id="method-try-assign-">Method <code>try_assign()</code><a class="anchor" aria-label="anchor" href="#method-try-assign-"></a></h3>
<p>Attempt to assign tasks to workers. This method is
intended to be called by <code>TaskQueue</code> objects.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">WorkerPool</span><span class="op">$</span><span class="fu">try_assign</span><span class="op">(</span><span class="va">tasks</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>tasks</code></dt>
<dd><p>A list of <code>Task</code> objects</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-3">Returns<a class="anchor" aria-label="anchor" href="#returns-3"></a></h4>
<p>Invisibly returns <code>NULL</code></p>
</div>

</div><p></p><hr><a id="method-WorkerPool-try_start"></a><div class="section">
<h3 id="method-try-start-">Method <code>try_start()</code><a class="anchor" aria-label="anchor" href="#method-try-start-"></a></h3>
<p>Attempt to start any assigned but not-yet-started tasks
in the worker pool. This method is intended to be called by <code>TaskQueue</code>
objects.</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">WorkerPool</span><span class="op">$</span><span class="fu">try_start</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-4">Returns<a class="anchor" aria-label="anchor" href="#returns-4"></a></h4>
<p>Invisibly returns <code>NULL</code></p>
</div>

</div><p></p><hr><a id="method-WorkerPool-try_finish"></a><div class="section">
<h3 id="method-try-finish-">Method <code>try_finish()</code><a class="anchor" aria-label="anchor" href="#method-try-finish-"></a></h3>
<p>Attempt to finish any started but not-yet-returned tasks
in the worker pool. This method is intended to be called by <code>TaskQueue</code>
objects.</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">WorkerPool</span><span class="op">$</span><span class="fu">try_finish</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-5">Returns<a class="anchor" aria-label="anchor" href="#returns-5"></a></h4>
<p>Invisibly returns <code>NULL</code></p>
</div>

</div><p></p><hr><a id="method-WorkerPool-refill_pool"></a><div class="section">
<h3 id="method-refill-pool-">Method <code>refill_pool()</code><a class="anchor" aria-label="anchor" href="#method-refill-pool-"></a></h3>
<p>Check all workers in the pool looking for workers that
have crashed or been shutdown, and replace them with fresh workers.</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">WorkerPool</span><span class="op">$</span><span class="fu">refill_pool</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-6">Returns<a class="anchor" aria-label="anchor" href="#returns-6"></a></h4>
<p>This function is called primarily for its side effect. It
returns a named character documenting the outcome, indicating the
current state of each worker: should not be "finished" for any worker.
Names denote worker ids.</p>
</div>

</div><p></p><hr><a id="method-WorkerPool-shutdown_pool"></a><div class="section">
<h3 id="method-shutdown-pool-">Method <code>shutdown_pool()</code><a class="anchor" aria-label="anchor" href="#method-shutdown-pool-"></a></h3>
<p>Terminate all workers in the worker pool.</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">WorkerPool</span><span class="op">$</span><span class="fu">shutdown_pool</span><span class="op">(</span>grace <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>grace</code></dt>
<dd><p>Grace period in milliseconds. If a worker process is still
running after this period, it will be killed.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-7">Returns<a class="anchor" aria-label="anchor" href="#returns-7"></a></h4>
<p>This function is called primarily for its side effect. It
returns a named character documenting the outcome, indicating the
current state of each worker: should be "finished" for all workers.
Names denote worker ids.</p>
</div>

</div><p></p><hr><a id="method-WorkerPool-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">WorkerPool</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Danielle Navarro.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

